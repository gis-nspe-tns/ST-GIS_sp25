<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-24">

<title>Class 2 Lecture Demonstration Lab 1: QGIS Interface Detailed</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="c1_lecture_demo_files/libs/clipboard/clipboard.min.js"></script>
<script src="c1_lecture_demo_files/libs/quarto-html/quarto.js"></script>
<script src="c1_lecture_demo_files/libs/quarto-html/popper.min.js"></script>
<script src="c1_lecture_demo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="c1_lecture_demo_files/libs/quarto-html/anchor.min.js"></script>
<link href="c1_lecture_demo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="c1_lecture_demo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="c1_lecture_demo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="c1_lecture_demo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="c1_lecture_demo_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="c1_lecture_demo_files/styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#part-i" id="toc-part-i" class="nav-link" data-scroll-target="#part-i">Part I:</a></li>
  <li><a href="#part-ii" id="toc-part-ii" class="nav-link" data-scroll-target="#part-ii">Part II:</a>
  <ul class="collapse">
  <li><a href="#part-iii" id="toc-part-iii" class="nav-link" data-scroll-target="#part-iii">Part III:</a></li>
  </ul></li>
  <li><a href="#data-1" id="toc-data-1" class="nav-link" data-scroll-target="#data-1">Data</a></li>
  <li><a href="#step-1-load-data" id="toc-step-1-load-data" class="nav-link" data-scroll-target="#step-1-load-data">Step 1: Load Data</a></li>
  <li><a href="#step-2-create-thiessen-polygons" id="toc-step-2-create-thiessen-polygons" class="nav-link" data-scroll-target="#step-2-create-thiessen-polygons">Step 2: Create Thiessen Polygons</a></li>
  <li><a href="#step-3-report-cholera-deaths-within-each-pump-voronoi-polygon" id="toc-step-3-report-cholera-deaths-within-each-pump-voronoi-polygon" class="nav-link" data-scroll-target="#step-3-report-cholera-deaths-within-each-pump-voronoi-polygon">Step 3: Report Cholera Deaths within each pump Voronoi polygon</a></li>
  <li><a href="#concluding-remarks" id="toc-concluding-remarks" class="nav-link" data-scroll-target="#concluding-remarks">Concluding Remarks</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References:</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class 2 Lecture Demonstration Lab 1: QGIS Interface Detailed</h1>
<p class="subtitle lead">Spring 2025 | <a href="https://courses.newschool.edu/courses/UENV3200/">UENV3200 + UURB3210 | CRN: 11008 + 11009</a></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>In this first demonstration lab, conduct <strong>Assignment I | Part III - The QGIS application interface</strong> section in order to familiarize and explore the QGIS interface prior to using it during your independent assignment 1. Further, review the <strong>Assignment I | Part III - File Management for QGIS</strong> that can help you begin good data management for QGIS to run smoothly.</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<ul>
<li><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.assignment.data/c1.natural.earth.data.zip">Class 2 Demonstration Lab 1 Data</a></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/data.preview.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Assignment 1 Data Preview</em></figcaption><p></p>
</figure>
</div>
</section>
<section id="part-i" class="level2">
<h2 class="anchored" data-anchor-id="part-i">Part I:</h2>
<ul>
<li>In order to access and display spatial data within QGIS, the data must first be uncompressed and connected. The following video guide covers the ways that data can be connected to QGIS with an emphasis on establishing a good directory file path and project folder hierarchy. While it may seem simple, maintaining good file structure when working with QGIS can save a lot of errors and undue trouble:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://vimeo.com/1002469658"><img src="c1_lecture_demo_files/img/v2-icon.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Demonstartion Lab 1 | Video Guide 1 - Data Source Manager, Directories and Folders</figcaption><p></p>
</figure>
</div>
<ul>
<li>Next, review the basics of the QGIS data interface. Further, deliverables for the course will often take the form of cartographic PDF exports, i.e.&nbsp;maps. Once data is loaded, it can be symbolized, mapped and exported across a variety of export types, including PDF. This <strong>Part III</strong> will cover the location of the various capacities needed to accomplish a fundamental workflow: loading spatial data, symbolizing the data and producing cartographic outputs.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://vimeo.com/1002468603"><img src="c1_lecture_demo_files/img/v3-icon.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Demonstration Lab 1 | Video Guide 2 - The QGIS Interface</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>To start, review the core QGIS 3.x interface. To assist, print out the letter sized PDF of the interface handout:</p></li>
<li><p><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.qgis.orientation/qgis.interface.pdf">PDF Interface Handout</a></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/CU0BHHs.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS Main Interface</figcaption><p></p>
</figure>
</div>
<p>Review the following components that correspond with the numbered interface locations show above:</p>
<ol type="1">
<li><strong>Map Canvas</strong> - The main display module for spatial data.</li>
<li><strong>Browser Panel</strong> - Directory connections and file hierachies.</li>
<li><strong>Layers Panel</strong> - A stacked display of data within the QGIS project.</li>
<li><strong>Toolbars</strong> - Various tasks common to typical GIS workflows.</li>
<li><strong>Menu Bar</strong> - Top level navigation device with drop-down capacity per component.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Within the <em>Menu Bar</em>, <strong>Plugins</strong> is located. This is a critical component of the topline <em>Menu Bar</em>. Here there are two sub-components - the plugins themselves and the <em>Python Console</em>. Throughout the course we will utilize plugins to accomplish certain tasks. Further, many functions within QGIS rely on python in the background which is installed alongside QGIS on the first install.</p>
</div>
</div>
<ul>
<li><p>If you want to learn more about how to script and run python functions for spatial analysis within QGIS, a recommended primer to get started is located as follows:</p></li>
<li><p><a href="https://anitagraser.com/pyqgis-101-introduction-to-qgis-python-programming-for-non-programmers/">PyQGIS 101: Introduction to QGIS Python programming for non-programmers</a></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/cwcXh5K.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Managing QGIS Plugins</figcaption><p></p>
</figure>
</div>
<ul>
<li>Typically a GIS project is launched with at least some data that is inherently spatial - administrative boundaries, points locations, raster base layers, ect. To do this first step, make sure the application is open, the <strong>Layers</strong> and <strong>Browser</strong> panels are active (if they are not both active: <em>view &gt; panels &gt; toogle on layers then browser or browser 2</em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/BDF7ih9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS Panels</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>Next, download the compressed assignment data:</p></li>
<li><p><strong><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.assignment.data/c1.natural.earth.data.zip">Assignment 1 Data Download</a></strong></p></li>
<li><p>Use an compression utility (7 Zip or Keka) to unzip the data and expand the directory. The machine desktop is a good location to place your working directory. Once unzipped, your data structure prior to QGIS should look like the following:</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/data.preview.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Assignment 1 Data Preview</em></figcaption><p></p>
</figure>
</div>
<ul>
<li><p>The top level directory <code>c1.natural.earth.data</code> contains the following data:</p></li>
<li><p><code>ne_110m_admin_0_countries</code></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/Cl8m8vp.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Natural Earth Admin Dataset</figcaption><p></p>
</figure>
</div>
<ul>
<li><code>ne_110m_populated_places_simple</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/P9K6b1c.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Natural Earth Populated Places Simple Version</figcaption><p></p>
</figure>
</div>
<ul>
<li>Once organized on your machine, point QGIS to the data. This is accomplished by <em>right-click</em> on the <code>Open Data Source Layer</code> tool from the <strong>Toolbar</strong>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/lOvn6o5.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS Source Layer Tool</figcaption><p></p>
</figure>
</div>
<ul>
<li>Both features in the assignment data are <em>vector</em> features, so the data type will be selected as <em>Vector &gt; File &gt; Vector Dataset(s) &gt; <code>file.name.shp</code></em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/HwA5op9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS Source Layer Tool &gt; Vector Features</figcaption><p></p>
</figure>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>its the <code>.shp</code> component of the ‘sidecar’ files listed in the sub-directory that is the critical file to open. Make sure to follow <em>open</em> with <em>add</em> so that the <code>.shp</code> is indeed added to the <strong>Map Canvas</strong>.</p>
</div>
</div>
<ul>
<li>Repeat the step above, but this time point to the <code>ne_110m_populated_places_simple.shp</code> file located in the sub-directory <code>ne_110_populated_places_simple</code>. The resulting <strong>Map Canvas</strong> should look similar to the following with two feature layers added to the <strong>Layers Panel</strong>, also displayed in the <strong>Map Canvas</strong> :</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/0heoS2P.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">QGIS Map Canvas</figcaption><p></p>
</figure>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Color symbology per layer is random upon the initial data load in QGIS. We will make simple changes to the defaults for this assignment. Keep in mind that upcoming assignments will feature much more robust symbol manipulation; for now simple manipulation is warranted.</p>
</div>
</div>
<ul>
<li>Once assignment <code>.shp</code> data is loaded correctly - <em>Populated Places</em> on top of <em>County Administrative Boundaries</em> - immediately save the project via <em>Project &gt; Save As &gt; <code>assignment1.qgs</code></em>.</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a compressed project save convention (<code>.qgz</code>) and another that is <em>not</em> compressed (<code>.qgs</code>). Proceed with the uncompressed option.</p>
</div>
</div>
</section>
<section id="part-ii" class="level2">
<h2 class="anchored" data-anchor-id="part-ii">Part II:</h2>
<p>In the first week’s <a href="https://gis-nspe-tns.github.io/ST-GIS_sp25/demos/c1.lecture.demo.html">Demonstration Lab 1</a>, we will utilize a vector file type that has been a longstanding file extension in ‘modern GIS’ of the past 2-3 decades. Known as the <strong>Shapefile</strong>, this file type is somewhat ‘complicated’ as it contains multiple <a href="https://en.wikipedia.org/wiki/Sidecar_file">sidecar files</a> in order to operate correctly:</p>
<blockquote class="blockquote">
<p>In most cases the relationship between the source file and the sidecar file is based on the file name; sidecar files have the same base name as the source file, but with a different extension. The problem with this system is that most operating systems and file managers have no knowledge of these relationships, and might allow the user to rename or move one of the files thereby breaking the relationship.</p>
</blockquote>
<p>Important to note are the three (3) mandatory files that are needed for <a href="https://en.wikipedia.org/wiki/Shapefile">shapefiles</a> to operate within a GIS. They are as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/man.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Mandatory Shapefile Files</em></figcaption><p></p>
</figure>
</div>
<ul>
<li>To start, navigate via a browser to <a href="https://geojson.io/#map=2/0/20">geojson.io</a>. We will create a points feature using the interface, but instead of downloading our points feature as a <code>.geojson</code> file type, we will choose <code>.shp</code> or <em>Shapefile</em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/shp.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Create a points feature; download as a Shapefile</em></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/shp.lines.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Uncompressed list of the resulting Shapefile <code>.shp</code> and its various sidecar files</em></figcaption><p></p>
</figure>
</div>
<section id="part-iii" class="level3">
<h3 class="anchored" data-anchor-id="part-iii">Part III:</h3>
<p>Recreating John Snow’s ‘Broad Street Pump’ Map</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/U1jtAIn.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Original map by John Snow showing the clusters of cholera cases in the London epidemic of 1854, drawn and lithographed by Charles Cheffins.</figcaption><p></p>
</figure>
</div>
<p>Starting from our conclusion last week, we will conduct together a ‘modern’ recreation of the John Snow Cholera Mapping within QGIS. Here we will not only utilize the QGIS interace, but run an analysis workflow, albeit very short yet effective:</p>
<p>We will first download the recreation data of John Snow’s ‘Broad Street Pump Map’ and run a series of GIS analysis tasks to derive insight and produce quantitative results about both the location of the pumps and the resulting deaths from the <code>Broad Street Pump</code> itself.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Digitized Pumps and Deaths.</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="data-1" class="level2">
<h2 class="anchored" data-anchor-id="data-1">Data</h2>
<p>The data for this demonstration lab comes from the QGIS project located <a href="https://docs.qgis.org/2.18/en/docs/training_manual/processing/john_snow.html">HERE</a>.</p>
<p>To start, <a href="">directly download</a> a prepared, compressed directory which includes all necessary data as well as a QGIS <code>.qgs</code> project file.</p>
<ul>
<li><a href="https://www.dropbox.com/scl/fi/ip85bxms5l9ypctxnuhbi/demo_1-partII-JS_data.zip?rlkey=iv9i9p3ryahpo2oandc3qqsqf&amp;st=kn6mx4ab&amp;dl=1">Direct Download</a></li>
</ul>
<p>Once complete, extract the zipped directory and open the directory folder. The results - including the project <code>.qgs</code> - should appear as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Directory Folder Uncompressed.</figcaption><p></p>
</figure>
</div>
</section>
<section id="step-1-load-data" class="level2">
<h2 class="anchored" data-anchor-id="step-1-load-data">Step 1: Load Data</h2>
<ul>
<li>Navigate to the directory folder <code>demo_1-partII-JS_data</code> then <em>double-click</em> the <code>demo_part2-john-snow.qgs</code> file. This will prompt QGIS to load the project on the machine. The <em>Table of Contents</em> should feature the following 2 vector layers and 1 raster layer (<code>.tif</code>):</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Project Vector Files.</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Data Frame View of Project Vector Files.</figcaption><p></p>
</figure>
</div>
</section>
<section id="step-2-create-thiessen-polygons" class="level2">
<h2 class="anchored" data-anchor-id="step-2-create-thiessen-polygons">Step 2: Create Thiessen Polygons</h2>
<p>Thiessen polygon boundaries define the area closest to each feature relative to all other features. Thiessen polygons are generated from a set of three or more features. In this case, our features will be the <em>Pumps</em> points.</p>
<p>Thiessen polygons are also referred to as spatial monopoly or Voronoi diagrams. This type of analysis assumes that there are clusters of features that are distinct within the larger dataset of features; again in this case, the <em>Pumps</em> points are our input features.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This type of analysis needs planar units, not degrees, for valid output results. We will touch on this issue in class 2, and more in depth in class 6 - Map Projections. For now, note that the project utlizes the <code>British National Grid</code> with a linear unit of <code>meter</code>, thus we don’t need to adopt another map projection in order to proceed with analysis.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/6.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Project Map Projection = British National Grid.</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/5.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Project Map Projection = British National Grid utilizes a planar unit of <code>meter</code>.</figcaption><p></p>
</figure>
</div>
<p>QGIS provides many analysis tools easily accessible, often from the <strong>Processing Toolbox</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Top Tool Bar with red ‘toolbox’.</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/7.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Search on <code>voronoi</code>.</figcaption><p></p>
</figure>
</div>
<p>Utilizing the <code>Voronoi polygons</code> tool, we will input the <em>Pumps</em> and output to a temporary file location:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/8.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>Voronoi polygons</code> Analysis Tool Dialog Box within the Processing Toolbox.</figcaption><p></p>
</figure>
</div>
<p>The results of the analysis tool should be a new polygon feature that represents the ‘clusters’ or ‘neighborhoods’ of distinct pump locations. If we open the attribute table of the new polygon feature, we can ascertain which polygon features the predominance of death locations via the <code>ID</code> attribute:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/20.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>Voronoi polygons</code> result.</figcaption><p></p>
</figure>
</div>
<p>The resulting Voronoi Polygons tell us the extent of distance, or travel, for each pump <em>inside</em> its most ‘efficient’ neighborhood. This gives us an idea of how far (euclidean distance) one would travel efficiently within one polygon before crossing into another polygon where another pump would be most efficient to our travel.</p>
<p>What this spatial analysis does NOT tell us is how many deaths have occurred within each pump’s ’neighborhood, i.e.&nbsp;its Voronoi polygon. To do this analysis task, we will turn to Step 3 below.</p>
</section>
<section id="step-3-report-cholera-deaths-within-each-pump-voronoi-polygon" class="level2">
<h2 class="anchored" data-anchor-id="step-3-report-cholera-deaths-within-each-pump-voronoi-polygon">Step 3: Report Cholera Deaths within each pump Voronoi polygon</h2>
<p>To do this next analysis step, we will utilize a common GIS tool whereby we both weight and count an attribute inside a polygon feature; in this case, we want to count deaths within each pump ‘neighborhood’.</p>
<p>To start, we can easily see just from the mapping thus far that the Voronoi polygon for the ‘Broad Street Pump’ features a predominance of death points. We can assume that this concentration likely also contains the top aggregate count of deaths from those points within their respective Voronoi polygon. So we can test this initial exploratory assumption by the <code>count points in polygon</code> tool.</p>
<p>Search for <code>count points in polygon</code> as we did for the previous tool. This will point to the following tool dialog box. Input <code>Cholera_Deaths</code> as the <em>Target Features</em> and utilize the <code>COUNT</code> attribute as the <em>Weight</em> and run the tool with the output as a default temporary file.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/21.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>count points in polygon</code> tool.</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/22.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>count points in polygon</code> Dialog Box with parameters set correctly.</figcaption><p></p>
</figure>
</div>
<p>Once the tool has run, we will receive a new polygon feature dataset that now has all the original Cholera Death events aggregated to their respective Voronoi polygon:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c1_lecture_demo_files/img/23.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>count points in polygon</code> results.</figcaption><p></p>
</figure>
</div>
<p>Clearly, polygon ID 1 in the example contains the predominant death count; and of course this is the <em>Broad Street Pump</em> central Voronoi polygon ‘neighborhood’.</p>
</section>
<section id="concluding-remarks" class="level2">
<h2 class="anchored" data-anchor-id="concluding-remarks">Concluding Remarks</h2>
<p>In this second demonstration lab, we have become oriented to the QGIS interface. In the assignment, you will further add <em>Cartographic Output</em> to your workflow. The following references are good resources to learn more about QGIS generally, and the John Snow historical mapping and its recreation in modern GIS.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References:</h2>
<ul>
<li><a href="https://docs.qgis.org/3.28/en/docs/user_manual/index.html">QGIS User Guide</a></li>
<li><a href="https://pallawi-ds.medium.com/what-are-geospatial-data-and-basics-about-getting-started-with-geospatial-data-analysis-6e5691d72930">Medium Post: What is Geospatial data and basics about getting started with geospatial data analysis</a></li>
<li><a href="https://geodacenter.github.io/data-and-lab/snow4/">GeoDa Data and Lab</a></li>
<li><a href="https://github.com/epibayes/john-snow-data">Github repository for the John Snow Data</a></li>
<li><a href="https://www.rcseng.ac.uk/library-and-publications/library/blog/mapping-disease-john-snow-and-cholera/">Mapping Disease: John Snow and Cholera</a></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/^(?:http:|https:)\/\/www\.quarto\.org\/custom/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



<script src="c1_lecture_demo_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>